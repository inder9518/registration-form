<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Event Registration</title>
<style>
body{font-family:Arial,sans-serif;background:#f4f4f9;margin:0;padding:0;}
h1{text-align:center;margin:20px;}
form{max-width:500px;margin:auto;background:white;padding:20px;border-radius:10px;box-shadow:0 4px 20px rgba(0,0,0,0.1);}
input,select,button{width:100%;padding:10px;margin:10px 0;border-radius:8px;border:1px solid #ccc;}
button{background:#4facfe;color:white;border:none;cursor:pointer;font-size:16px;}
button:hover{background:#007bff;}
.top-btn{display:block;width:200px;margin:10px auto;padding:10px;background:#4facfe;color:white;text-decoration:none;border-radius:8px;text-align:center;font-weight:bold;}
.top-btn:hover{background:#007bff;}
</style>
</head>
<body>

<a href="home.html" class="top-btn">Go to Admin Page</a>
<h1>Register for Event</h1>
<form id="registrationForm">
<select id="eventSelect" required></select>
<input type="text" id="name" placeholder="Full Name" required>
<input type="tel" id="phone" placeholder="Phone" required>
<input type="email" id="email" placeholder="Email" required>
<select id="gender" required>
<option value="">Select Gender</option>
<option>Male</option>
<option>Female</option>
<option>Other</option>
</select>
<input type="text" id="race" placeholder="Race / Community">
<input type="date" id="dob" required>
<button type="submit">Register</button>
</form>

<script>
const WEB_APP_URL = "YOUR_WEB_APP_URL"; // Replace with your Google Web App URL

async function loadEvents(){
  const res = await fetch(`${WEB_APP_URL}?sheet=Events`);
  const events = await res.json();
  const select = document.getElementById("eventSelect");
  select.innerHTML="<option value=''>Select Event</option>";
  events.forEach((event,idx)=>{
    const option = document.createElement("option");
    option.value = idx;
    option.textContent = `${event.Name} (${event.Date})`;
    select.appendChild(option);
  });
}

document.getElementById("registrationForm").addEventListener("submit", async function(e){
  e.preventDefault();
  const data = {
    sheet:"Registrations",
    EventIndex: document.getElementById("eventSelect").value,
    Name: document.getElementById("name").value,
    Phone: document.getElementById("phone").value,
    Email: document.getElementById("email").value,
    Gender: document.getElementById("gender").value,
    Race: document.getElementById("race").value,
    DOB: document.getElementById("dob").value
  };
  await fetch(WEB_APP_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)});
  alert("Registration Saved!");
  document.getElementById("registrationForm").reset();
  loadEvents();
});

loadEvents();
</script>
</body>
</html>
